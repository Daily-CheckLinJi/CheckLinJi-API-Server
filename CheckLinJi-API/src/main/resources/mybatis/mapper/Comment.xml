<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.upside.api.mapper.UserCommentMapper">
	
	
	
	 <!-- 유저 댓글 등록 -->
	<insert id="userCommentSubmit" parameterType="CommentDto" >
		INSERT INTO COMMENT (content, nick_name, regist_date, update_date, challenge_submission_id, parent_id, email)
			<choose>
      			<when test="parentId == null">
        			VALUES(#{content},#{nickName},#{registDate}, NULL, #{challengeSubmissionId}, NULL, #{email})
      			</when>
      		  <otherwise>
        			VALUES(#{content},#{nickName},#{registDate}, NULL, #{challengeSubmissionId}, #{parentId}, #{email})
      		  </otherwise>
    		</choose>	
	</insert>

	 <!-- 유저 댓글 등록 -->
	<insert id="userCommentUpdate" parameterType="CommentDto" >
		UPDATE COMMENT
			SET content=#{content}, update_date=#{updateDate}
		WHERE comment_seq=#{commentSeq}
	</insert>
</mapper>